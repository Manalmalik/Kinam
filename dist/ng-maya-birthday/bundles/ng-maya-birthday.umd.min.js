!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/material/datepicker"),require("ng-maya-number"),require("shared"),require("@angular/material/core"),require("@angular/material-moment-adapter"),require("rxjs"),require("nahual-date"),require("moment"),require("rxjs/operators"),require("core"),require("@angular/core"),require("@angular/forms"),require("@angular/animations")):"function"==typeof define&&define.amd?define("ng-maya-birthday",["exports","@angular/material/datepicker","ng-maya-number","shared","@angular/material/core","@angular/material-moment-adapter","rxjs","nahual-date","moment","rxjs/operators","core","@angular/core","@angular/forms","@angular/animations"],n):n(e["ng-maya-birthday"]={},e.ng.material.datepicker,e.ngMayaNumber,e.shared,e.ng.material.core,e.ng["material-moment-adapter"],e.rxjs,e.nahualDate,e.moment_,e.rxjs.operators,e.core$1,e.ng.core,e.ng.forms,e.ng.animations)}(this,function(e,n,t,a,r,i,o,s,l,d,m,u,c,p){"use strict";var f={parse:{dateInput:"input"},display:{dateInput:"DD.MM.YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"DD.MM.YYYY",monthYearA11yLabel:"MMMM YYYY"}},h=l,g={year:[c.Validators.required,c.Validators.min(1900),c.Validators.max(2099)],month:[c.Validators.required,c.Validators.min(1),c.Validators.max(12)],day:[c.Validators.required,c.Validators.min(1),c.Validators.max(31)]},b=f,y=function(){function e(e){this.localStorageService=e,this.date=new Date,this.loading$=new o.BehaviorSubject(!1),this.maxDates=[31,28,31,30,31,30,31,31,30,31,30,31]}return e.prototype.ngOnInit=function(){var i=this,e=localStorage.getItem("birthday"),n=new Date;if(e){var t=new Date(e);this.form=new c.FormGroup({day:new c.FormControl(t.getDate(),g.day),month:new c.FormControl(t.getMonth()+1,g.month),year:new c.FormControl(t.getFullYear(),g.year)}),this.kinamDate=s.kinamNahual(t)}else this.form=new c.FormGroup({day:new c.FormControl(n.getDate(),g.day),month:new c.FormControl(n.getMonth()+1,g.month),year:new c.FormControl(n.getFullYear(),g.year)}),this.kinamDate=s.kinamNahual(n);this.form.valueChanges.pipe(d.distinctUntilChanged(),d.switchMap(function(e){return o.of(e)}),d.tap(function(){return i.loading$.next(!0)}),d.debounceTime(1e3),d.filter(function(e){var n=e.day,t=e.month,a=e.year;return!1===!(!isNaN(n)&&!isNaN(t)&&!isNaN(a)&&n&&t&&a&&a<=2099&&1900<=a)})).subscribe(function(e){var n=e.day,t=e.month,a=e.year,r=h(new Date(a+"/"+t+"/"+n));r=r.add(12,"hours"),i.localStorageService.set("birthday",r.toString()),i.kinamDate.update(r.toDate()),i.loading$.next(!1)})},e.decorators=[{type:u.Component,args:[{selector:"kinam-birthday",template:'<div\n  [formGroup]="form"\n  class="birthday-blocks"\n>\n  <kinam-maya-number-block [number]="kinamDate?.day">\n    <input\n      class="date-input"\n      type="number"\n      min="1"\n      [max]="maxDates[form?.get(\'month\')?.value - 1]"\n      placeholder="Day"\n      formControlName="day"\n    />\n  </kinam-maya-number-block>\n\n  <kinam-maya-number-block [number]="kinamDate?.month">\n    <input\n      class="date-input"\n      type="number"\n      min="1"\n      max="12"\n      placeholder="Month"\n      formControlName="month"\n    />\n  </kinam-maya-number-block>\n\n  <kinam-maya-number-block [number]="kinamDate?.year">\n    <input\n      class="date-input"\n      type="number"\n      min="1900"\n      max="2099"\n      placeholder="Year"\n      formControlName="year"\n    />\n  </kinam-maya-number-block>\n</div>\n\n<div\n  class="anim-container"\n  [ngSwitch]="!(loading$ | async)"\n>\n\n  <div\n    class="reading columns"\n    *ngSwitchCase="true"\n    [@calc]\n  >\n    <div class="column is-4">\n      <h2 class="title has-text-centered has-text-white">\n        Your Nahual: {{ kinamDate?.nahualName  }}\n      </h2>\n      <h2 class="title has-text-centered has-text-white">\n        Your Day Sign: {{ kinamDate?.daySign }}\n      </h2>\n    </div>\n    <div class="column is-4">\n      <img\n        *ngIf="kinamDate?.image"\n        [src]="kinamDate?.image"\n        [attr.alt]="\'Nahual Sign: \' + kinamDate?.daySign"\n      />\n    </div>\n    <div class="column is-4">\n      <h2 class="title has-text-centered has-text-white">\n        Galactic Number: {{ kinamDate?.nahualDay  }}\n      </h2>\n      <kinam-maya-number-block\n        class="is-centered is-inverted"\n        [number]="kinamDate?.nahualDay"\n      ></kinam-maya-number-block>\n    </div>\n  </div>\n\n  <div\n    class="columns"\n    *ngSwitchCase="true"\n  >\n    <div class="column is-6 is-offset-3 flex-center">\n      <kinam-readings></kinam-readings>\n    </div>\n  </div>\n\n  <div\n    *ngSwitchCase="false"\n    [@calc]\n    class="calculating"\n  >\n    <h2 class="title has-text-white">Calculating your Nahual.</h2>\n    <div>\n      <svg\n        width="100px"\n        height="100px"\n        xmlns="http://www.w3.org/2000/svg"\n        viewBox="0 0 100 100"\n        preserveAspectRatio="xMidYMid"\n        class="lds-ball"\n        style="background: none;"\n      >\n        <circle\n          cx="50"\n          cy="35.7097"\n          r="13"\n          fill="#fdfdfd"\n        >\n          <animate\n            attributeName="cy"\n            calcMode="spline"\n            values="23;77;23"\n            keyTimes="0;0.5;1"\n            dur="1"\n            keySplines="0.45 0 0.9 0.55;0 0.45 0.55 0.9"\n            begin="0s"\n            repeatCount="indefinite"\n          ></animate>\n        </circle>\n      </svg>\n    </div>\n  </div>\n</div>',providers:[{provide:r.DateAdapter,useClass:i.MomentDateAdapter,deps:[r.MAT_DATE_LOCALE]},{provide:r.MAT_DATE_FORMATS,useValue:b}],animations:[p.trigger("calc",[p.transition(":enter",[p.style({transform:"translateX(15%)",opacity:1}),p.animate(200)]),p.transition(":leave",[p.group([p.animate("0.2s",p.style({transform:"translateX(-15%)"})),p.animate("0.2s ease",p.style({opacity:0}))])])])],styles:[":host{text-align:center;display:block}.title{margin-bottom:2rem}.anim-container{height:325px;position:relative}@media screen and (max-width:767px){.anim-container{height:615px}}@media screen and (max-width:320px){.birthday-input{font-size:1.5rem}}.is-centered{margin:2rem auto}.is-inverted{-webkit-filter:invert(100%);filter:invert(100%)}.calculating,.reading{width:100%}.birthday-blocks{max-width:30rem;display:flex;align-items:flex-end;justify-content:center;margin:2rem auto;-webkit-filter:invert(100%);filter:invert(100%);border-radius:.25rem}.birthday-input{border:1px solid;border-radius:1.5rem;background:#fff;padding:0 1.5rem;-webkit-filter:invert(100%);filter:invert(100%);transition:box-shadow .2s ease-in-out}.birthday-input.mat-focused{box-shadow:0 0 6px 2px rgba(0,0,0,.75);transition:box-shadow .2s ease-in-out}@media only screen and (max-width:320px){.birthday-blocks{margin:2rem}}kinam-maya-number-block{width:calc(100% / 3)}@media only screen and (max-width:600px){.birthday-blocks{align-items:flex-end;justify-content:center;flex-direction:row}}img{-webkit-filter:invert(100%);filter:invert(100%)}table{width:50%;margin:2rem auto;text-align:center;table-layout:fixed;-webkit-filter:invert(100%);filter:invert(100%)}strong{margin-top:1rem}.date-input{border-radius:0;background-color:#0000;border:none;padding:1rem 0;color:#000;max-width:110px;width:110px;font-size:2rem;font-family:Montserrat,sans-serif;border-top:none;border-left:none;border-right:none;text-align:center;box-shadow:0 1px 0 0 rgba(122,122,122,.5);transition:.2s ease-in-out}.date-input:active,.date-input:focus{transition:.2s ease-in-out;box-shadow:0 2px 0 0 #000;outline:0}"]}]}],e.ctorParameters=function(){return[{type:m.LocalStorageService}]},e}(),v=function(){function e(){}return e.decorators=[{type:u.Component,args:[{selector:"kinam-readings",template:'\n    <div class="hover-container">\n      <div class="outer">\n        <div class="inner overlay" id="overlay"></div>\n        <div class="inner outline"></div>\n        <div class="behind fill">\n          <div class="text">\n            Get your Tzolkʼin Readings\n          </div>\n        </div>\n      </div>\n    </div>\n  ',styles:[".hover-container{background-color:#000;display:flex;justify-content:center;align-items:center;position:relative}.inner{border:1px solid #fff;width:15rem;height:11rem;font-size:2rem;background-color:#fff;transition:background-color .3s ease-in-out}.outline{border:1px solid #fff;width:15rem;height:11rem}.behind{background:#000;width:15rem;height:11rem;border:1px solid;-webkit-transform:translateX(-4%) translateY(-104%);transform:translateX(-4%) translateY(-104%);position:absolute}.fill{color:#fff;z-index:3;font-size:2rem;font-family:century-gothic,sans-serif}.overlay{background:0 0;position:absolute;z-index:5;transition:background .3s ease-in-out}.fill,.inner{border-radius:.5rem}.text{margin:1rem 2rem}.outer{cursor:pointer}.outer:hover .fill{background-color:#fff;color:#000;transition:background-color .3s ease-in-out,color .3s ease-in-out}.outer:hover .overlay{border:1px solid #000;transition:border .3s ease-in-out}.outer:hover .inner{background-color:#000;color:#fff;z-index:-1;transition:background-color .3s ease-in-out,color .3s ease-in-out}:host{margin:2rem}"]}]}],e}(),x=function(){function e(){}return e.decorators=[{type:u.NgModule,args:[{declarations:[v],imports:[m.CoreModule],exports:[v]}]}],e}(),k=function(){function e(e){this._builder=e,this.open=!1,this.form=new c.FormGroup({day:new c.FormControl(null,c.Validators.required),month:new c.FormControl(null,c.Validators.required),year:new c.FormControl(null,c.Validators.required)}),this.dateChange=new u.EventEmitter}return e.prototype.submit=function(){if(this.form.value){var e=this.form.value,n=e.day,t=e.month,a=e.year;if(n&&t&&a){var r=h(new Date(a+"/"+t+"/"+n));this.dateChange.emit(r)}}},e.prototype.animFactory=function(e,n){return this._builder.build([p.style({transform:"translateY("+(n?0:200*e)+"px)",opacity:n?"1":"0"}),p.animate("200ms cubic-bezier(0.17,0.43,0.75,0.97)",p.style({transform:"translateY("+(n?200*e:0)+"px)",opacity:n?"0":"1"}))])},e.prototype.toggle=function(e,n){this.open=!this.open;var t=this.animFactory(this.open?-1:1,this.open).create(e),a=this.animFactory(this.open?1:-1,!this.open).create(n);t.play(),a.play()},e.decorators=[{type:u.Component,args:[{selector:"kinam-date",template:'<div\n  class="btn-container"\n  (click)="toggle(date, inputs)"\n>\n  <i\n    class="fal"\n    [ngClass]="open ? \'fa-minus\' : \'fa-plus\'"\n  ></i>\n</div>\n<div style="position: relative; width: 20rem">\n  <div\n    class="date"\n    #date\n  >\n    <div *ngIf="\n          form.get(\'day\').value &&\n            form.get(\'month\').value &&\n            form.get(\'year\').value;\n          else noBd\n        ">\n      {{ form.get(\'day\').value }}.{{ form.get(\'month\').value }}.{{\n          form.get(\'year\').value\n        }}\n    </div>\n  </div>\n  <form\n    #inputs\n    class="outer"\n    action=""\n    [formGroup]="form"\n    (submit)="toggle(date, inputs)"\n    style="transform: translateY(200px); opacity: 0;"\n  >\n    <input\n      type="number"\n      min="1"\n      max="31"\n      placeholder="1"\n      formControlName="day"\n    />\n\n    <input\n      type="number"\n      min="1"\n      max="12"\n      placeholder="7"\n      formControlName="month"\n    />\n\n    <input\n      type="number"\n      min="1900"\n      max="2099"\n      placeholder="1992"\n      formControlName="year"\n    />\n    <button\n      type="submit"\n      hidden\n    ></button>\n  </form>\n</div>\n<ng-template #noBd>\n  <span\n    (click)="toggle(date, inputs)"\n    class="enter-label"\n  >Enter your Birthday</span>\n</ng-template>',changeDetection:u.ChangeDetectionStrategy.OnPush,styles:[":host{color:#fff;background-color:#000;display:flex;justify-content:center;position:relative;padding:2rem;min-height:20rem;width:20rem;margin:auto;overflow:hidden}.date{transition:.33s ease-in-out;-webkit-transform:translateY(0);transform:translateY(0);opacity:1;position:absolute;margin-top:1rem;font-size:1.5rem;font-family:century-gothic,sans-serif}.fa-minus,.fa-plus{font-size:2rem;margin:1rem;cursor:pointer}input{border-radius:0;background:rgba(0,0,0,0);padding:1rem;color:#fff;border:none;font-size:2rem;font-family:Montserrat,sans-serif;border-top:none;border-left:none;border-right:none;border-bottom:1px solid #373737;transition:border-bottom .33s ease-in-out}input:active,input:focus{border-bottom:1px solid #fff;transition:border-bottom .33s ease-in-out;outline:0}.outer{overflow:hidden;position:absolute}.outer input{display:block}.enter-label{cursor:pointer}"]}]}],e.ctorParameters=function(){return[{type:p.AnimationBuilder}]},e}(),w=function(){function e(){}return e.decorators=[{type:u.NgModule,args:[{declarations:[y,k],imports:[n.MatDatepickerModule,r.MatNativeDateModule,t.MayanNumberModule,a.SharedModule,x],exports:[y,n.MatDatepickerModule,r.MatNativeDateModule,t.MayanNumberModule,a.SharedModule]}]}],e}();e.moment=h,e.DateFormat=f,e.BirthdayModule=w,e.ɵa=y,e.ɵb=k,e.ɵd=v,e.ɵc=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-maya-birthday.umd.min.js.map