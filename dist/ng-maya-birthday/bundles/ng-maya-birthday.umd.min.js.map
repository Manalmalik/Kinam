{"version":3,"sources":["ng://ng-maya-birthday/lib/birthday/date-format.ts","ng://ng-maya-birthday/lib/birthday/moment.ts","ng://ng-maya-birthday/lib/birthday/birthday.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.module.ts","ng://ng-maya-birthday/lib/birthday/date-input/date-input.ts","ng://ng-maya-birthday/lib/birthday/birthday.module.ts"],"names":["DateFormat","parse","dateInput","display","monthYearLabel","dateA11yLabel","monthYearA11yLabel","moment","moment_","validators","year","Validators","required","min","max","month","day","BirthdayComponent","localStorageService","this","date","Date","loading$","BehaviorSubject","maxDates","prototype","ngOnInit","_this","lastDate","localStorage","getItem","today","timestamp","form","FormGroup","FormControl","getDate","getMonth","getFullYear","kinamDate","kinamNahual","valueChanges","pipe","distinctUntilChanged","switchMap","x","of","tap","next","debounceTime","filter","_a","isNaN","subscribe","add","set","toString","update","toDate","Component","args","selector","template","providers","provide","DateAdapter","useClass","MomentDateAdapter","deps","MAT_DATE_LOCALE","MAT_DATE_FORMATS","useValue","ɵ0","animations","trigger","transition","style","transform","opacity","animate","group","LocalStorageService","GetReadingComponent","ReadingsModule","NgModule","declarations","imports","CoreModule","exports","DateInputComponent","_builder","open","dateChange","EventEmitter","submit","value","emit","animFactory","direction","build","toggle","el","el2","player","create","player2","play","changeDetection","ChangeDetectionStrategy","OnPush","AnimationBuilder","BirthdayModule","MatDatepickerModule","MatNativeDateModule","MayanNumberModule","SharedModule"],"mappings":"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","sourcesContent":["export const DateFormat = {\n  parse: {\n    dateInput: 'input'\n  },\n  display: {\n    dateInput: 'DD.MM.YYYY',\n    monthYearLabel: 'MMMM YYYY',\n    dateA11yLabel: 'DD.MM.YYYY',\n    monthYearA11yLabel: 'MMMM YYYY'\n  }\n};\n","import * as moment_ from 'moment';\nexport const moment = moment_;\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport {\n  DateAdapter,\n  MAT_DATE_LOCALE,\n  MAT_DATE_FORMATS\n} from '@angular/material/core';\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\nimport { trigger, transition, style, animate, group } from '@angular/animations';\n\nimport { BehaviorSubject, of } from 'rxjs';\n\nimport { KinamNahual, kinamNahual } from 'nahual-date';\nimport { LocalStorageService } from 'core';\n\nimport { DateFormat } from './date-format';\nimport { moment } from './moment';\nimport { tap, switchMap, debounceTime, filter, distinctUntilChanged } from 'rxjs/operators';\n\nconst YEAR_MAX = 2099;\nconst YEAR_MIN = 1900;\n\nconst validators = {\n  year: [\n    Validators.required,\n    Validators.min(YEAR_MIN),\n    Validators.max(YEAR_MAX)\n  ],\n  month: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(12)\n  ],\n  day: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(31)\n  ]\n};\n\n@Component({\n  selector: 'kinam-birthday',\n  templateUrl: './birthday.component.html',\n  styleUrls: ['./birthday.component.scss'],\n  providers: [\n    {\n      provide: DateAdapter,\n      useClass: MomentDateAdapter,\n      deps: [MAT_DATE_LOCALE]\n    },\n    { provide: MAT_DATE_FORMATS, useValue: DateFormat }\n  ],\n  animations: [\n    trigger('calc', [\n      transition(':enter', [\n        style({ transform: 'translateX(15%)', opacity: 1 }),\n        animate(200)\n      ]),\n      transition(':leave', [\n        group([\n          animate('0.2s', style({ transform: 'translateX(-15%)' })),\n          animate('0.2s ease', style({\n            opacity: 0\n          }))\n        ])\n      ])\n    ])\n  ]\n})\nexport class BirthdayComponent implements OnInit {\n  public date = new Date();\n\n  public kinamDate: KinamNahual;\n  public dateCtrl: FormControl;\n  public loading$ = new BehaviorSubject(false);\n\n  constructor(\n    private localStorageService: LocalStorageService,\n  ) { }\n\n  public dateConfig: {\n    min: Date;\n    today: Date;\n    startView: 'multi-year' | 'year';\n    touchUi: boolean;\n  };\n\n  public form: FormGroup;\n\n  public maxDates = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n  public ngOnInit() {\n\n    const lastDate = localStorage.getItem('birthday');\n\n    const today = new Date();\n    if (!lastDate) {\n      this.form = new FormGroup({\n        day: new FormControl(today.getDate(), validators.day),\n        month: new FormControl(today.getMonth() + 1, validators.month),\n        year: new FormControl(today.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(today);\n    } else {\n      const timestamp = new Date(lastDate);\n      this.form = new FormGroup({\n        day: new FormControl(timestamp.getDate(), validators.day),\n        month: new FormControl(timestamp.getMonth() + 1, validators.month),\n        year: new FormControl(timestamp.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(timestamp);\n    }\n\n    this.form.valueChanges.pipe(\n      distinctUntilChanged(),\n      switchMap(x => of(x)),\n      tap(() => this.loading$.next(true)),\n      debounceTime(1000),\n      filter(\n        ({ day, month, year }) => {\n          const x = !(\n            !isNaN(day) &&\n            !isNaN(month) &&\n            !isNaN(year) &&\n            !!day &&\n            !!month &&\n            !!year &&\n            year <= YEAR_MAX &&\n            year >= YEAR_MIN\n          );\n          if (x === false) {\n            return true;\n          }\n          return false;\n        }\n      )\n    ).subscribe(({ day, month, year }) => {\n      let date = moment(new Date(`${year}/${month}/${day}`));\n      date = date.add(12, 'hours');\n      this.localStorageService.set('birthday', date.toString());\n      this.kinamDate.update(date.toDate());\n      this.loading$.next(false);\n    });\n  }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'kinam-readings',\n  template: `\n    <div class=\"hover-container\">\n      <div class=\"outer\">\n        <div class=\"inner overlay\" id=\"overlay\"></div>\n        <div class=\"inner outline\"></div>\n        <div class=\"behind fill\">\n          <div class=\"text\">\n            Get your TzolkÊ¼in Readings\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./readings.component.scss']\n})\nexport class GetReadingComponent { }\n","import { NgModule } from '@angular/core';\nimport { GetReadingComponent } from './readings.component';\nimport { CoreModule } from 'core';\n\n@NgModule({\n    declarations: [GetReadingComponent],\n    imports: [CoreModule],\n    exports: [GetReadingComponent]\n})\nexport class ReadingsModule { }\n\n","import {\n  Component,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ElementRef,\n} from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\n\nimport { moment } from '../moment';\nimport { Moment } from 'moment';\nimport { animate, style, AnimationBuilder } from '@angular/animations';\n\n@Component({\n  selector: 'kinam-date',\n  templateUrl: './date-input.html',\n  styleUrls: ['./date-input.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DateInputComponent {\n  constructor(private _builder: AnimationBuilder) { }\n  public open = false;\n  public form = new FormGroup({\n    day: new FormControl(null, Validators.required),\n    month: new FormControl(null, Validators.required),\n    year: new FormControl(null, Validators.required)\n  });\n\n  public dateChange = new EventEmitter<Moment>();\n\n  submit() {\n    if (this.form.value) {\n      const { day, month, year } = this.form.value;\n      if (day && month && year) {\n        const date = moment(new Date(`${year}/${month}/${day}`));\n        this.dateChange.emit(date);\n      }\n    }\n  }\n\n  private animFactory(direction: number, open: boolean) {\n    return this._builder.build([\n      style({\n        transform: `translateY(${open ? 0 : direction * 200}px)`,\n        opacity: open ? '1' : '0'\n      }),\n      animate(\n        '200ms cubic-bezier(0.17,0.43,0.75,0.97)',\n        style({\n          transform: `translateY(${!open ? 0 : direction * 200}px)`,\n          opacity: !open ? '1' : '0'\n        })\n      )\n    ]);\n  }\n\n  toggle(el: ElementRef, el2: ElementRef) {\n    this.open = !this.open;\n    const player = this.animFactory(!this.open ? 1 : -1, this.open).create(el);\n    const player2 = this.animFactory(this.open ? 1 : -1, !this.open).create(\n      el2\n    );\n    player.play();\n    player2.play();\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\n\nimport { MayanNumberModule } from 'ng-maya-number';\nimport { SharedModule } from 'shared';\n\nimport { BirthdayComponent } from './birthday.component';\nimport { ReadingsModule } from './hover-card/readings.module';\nimport { DateInputComponent } from './date-input/date-input';\n\n@NgModule({\n  declarations: [BirthdayComponent, DateInputComponent],\n  imports: [\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule,\n    ReadingsModule,\n\n  ],\n  exports: [\n    BirthdayComponent,\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule\n  ]\n})\nexport class BirthdayModule { }\n"]}