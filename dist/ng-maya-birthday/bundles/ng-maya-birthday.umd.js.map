{"version":3,"file":"ng-maya-birthday.umd.js.map","sources":["ng://ng-maya-birthday/lib/birthday/date-format.ts","ng://ng-maya-birthday/lib/birthday/moment.ts","ng://ng-maya-birthday/lib/birthday/birthday.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.module.ts","ng://ng-maya-birthday/lib/birthday/date-input/date-input.ts","ng://ng-maya-birthday/lib/birthday/birthday.module.ts"],"sourcesContent":["export const DateFormat = {\n  parse: {\n    dateInput: 'input'\n  },\n  display: {\n    dateInput: 'DD.MM.YYYY',\n    monthYearLabel: 'MMMM YYYY',\n    dateA11yLabel: 'DD.MM.YYYY',\n    monthYearA11yLabel: 'MMMM YYYY'\n  }\n};\n","import * as moment_ from 'moment';\nexport const moment = moment_;\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport {\n  DateAdapter,\n  MAT_DATE_LOCALE,\n  MAT_DATE_FORMATS\n} from '@angular/material/core';\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\nimport { trigger, transition, style, animate, group } from '@angular/animations';\n\nimport { BehaviorSubject, of } from 'rxjs';\n\nimport { KinamNahual, kinamNahual } from 'nahual-date';\nimport { LocalStorageService } from 'core';\n\nimport { DateFormat } from './date-format';\nimport { moment } from './moment';\nimport { tap, switchMap, debounceTime, filter, distinctUntilChanged } from 'rxjs/operators';\n\nconst YEAR_MAX = 2099;\nconst YEAR_MIN = 1900;\n\nconst validators = {\n  year: [\n    Validators.required,\n    Validators.min(YEAR_MIN),\n    Validators.max(YEAR_MAX)\n  ],\n  month: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(12)\n  ],\n  day: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(31)\n  ]\n};\n\n@Component({\n  selector: 'kinam-birthday',\n  templateUrl: './birthday.component.html',\n  styleUrls: ['./birthday.component.scss'],\n  providers: [\n    {\n      provide: DateAdapter,\n      useClass: MomentDateAdapter,\n      deps: [MAT_DATE_LOCALE]\n    },\n    { provide: MAT_DATE_FORMATS, useValue: DateFormat }\n  ],\n  animations: [\n    trigger('calc', [\n      transition(':enter', [\n        style({ transform: 'translateX(15%)', opacity: 1 }),\n        animate(200)\n      ]),\n      transition(':leave', [\n        group([\n          animate('0.2s', style({ transform: 'translateX(-15%)' })),\n          animate('0.2s ease', style({\n            opacity: 0\n          }))\n        ])\n      ])\n    ])\n  ]\n})\nexport class BirthdayComponent implements OnInit {\n  public date = new Date();\n\n  public kinamDate: KinamNahual;\n  public dateCtrl: FormControl;\n  public loading$ = new BehaviorSubject(false);\n\n  constructor(\n    private localStorageService: LocalStorageService,\n  ) { }\n\n  public dateConfig: {\n    min: Date;\n    today: Date;\n    startView: 'multi-year' | 'year';\n    touchUi: boolean;\n  };\n\n  public form: FormGroup;\n\n  public maxDates = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n  public ngOnInit() {\n\n    const lastDate = localStorage.getItem('birthday');\n\n    const today = new Date();\n    if (!lastDate) {\n      this.form = new FormGroup({\n        day: new FormControl(today.getDate(), validators.day),\n        month: new FormControl(today.getMonth() + 1, validators.month),\n        year: new FormControl(today.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(today);\n    } else {\n      const timestamp = new Date(lastDate);\n      this.form = new FormGroup({\n        day: new FormControl(timestamp.getDate(), validators.day),\n        month: new FormControl(timestamp.getMonth() + 1, validators.month),\n        year: new FormControl(timestamp.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(timestamp);\n    }\n\n    this.form.valueChanges.pipe(\n      distinctUntilChanged(),\n      switchMap(x => of(x)),\n      tap(() => this.loading$.next(true)),\n      debounceTime(1000),\n      filter(\n        ({ day, month, year }) => {\n          const x = !(\n            !isNaN(day) &&\n            !isNaN(month) &&\n            !isNaN(year) &&\n            !!day &&\n            !!month &&\n            !!year &&\n            year <= YEAR_MAX &&\n            year >= YEAR_MIN\n          );\n          if (x === false) {\n            return true;\n          }\n          return false;\n        }\n      )\n    ).subscribe(({ day, month, year }) => {\n      let date = moment(new Date(`${year}/${month}/${day}`));\n      date = date.add(12, 'hours');\n      this.localStorageService.set('birthday', date.toString());\n      this.kinamDate.update(date.toDate());\n      this.loading$.next(false);\n    });\n  }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'kinam-readings',\n  template: `\n    <div class=\"hover-container\">\n      <div class=\"outer\">\n        <div class=\"inner overlay\" id=\"overlay\"></div>\n        <div class=\"inner outline\"></div>\n        <div class=\"behind fill\">\n          <div class=\"text\">\n            Get your TzolkÊ¼in Readings\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./readings.component.scss']\n})\nexport class GetReadingComponent { }\n","import { NgModule } from '@angular/core';\nimport { GetReadingComponent } from './readings.component';\nimport { CoreModule } from 'core';\n\n@NgModule({\n    declarations: [GetReadingComponent],\n    imports: [CoreModule],\n    exports: [GetReadingComponent]\n})\nexport class ReadingsModule { }\n\n","import {\n  Component,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ElementRef,\n} from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\n\nimport { moment } from '../moment';\nimport { Moment } from 'moment';\nimport { animate, style, AnimationBuilder } from '@angular/animations';\n\n@Component({\n  selector: 'kinam-date',\n  templateUrl: './date-input.html',\n  styleUrls: ['./date-input.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DateInputComponent {\n  constructor(private _builder: AnimationBuilder) { }\n  public open = false;\n  public form = new FormGroup({\n    day: new FormControl(null, Validators.required),\n    month: new FormControl(null, Validators.required),\n    year: new FormControl(null, Validators.required)\n  });\n\n  public dateChange = new EventEmitter<Moment>();\n\n  submit() {\n    if (this.form.value) {\n      const { day, month, year } = this.form.value;\n      if (day && month && year) {\n        const date = moment(new Date(`${year}/${month}/${day}`));\n        this.dateChange.emit(date);\n      }\n    }\n  }\n\n  private animFactory(direction: number, open: boolean) {\n    return this._builder.build([\n      style({\n        transform: `translateY(${open ? 0 : direction * 200}px)`,\n        opacity: open ? '1' : '0'\n      }),\n      animate(\n        '200ms cubic-bezier(0.17,0.43,0.75,0.97)',\n        style({\n          transform: `translateY(${!open ? 0 : direction * 200}px)`,\n          opacity: !open ? '1' : '0'\n        })\n      )\n    ]);\n  }\n\n  toggle(el: ElementRef, el2: ElementRef) {\n    this.open = !this.open;\n    const player = this.animFactory(!this.open ? 1 : -1, this.open).create(el);\n    const player2 = this.animFactory(this.open ? 1 : -1, !this.open).create(\n      el2\n    );\n    player.play();\n    player2.play();\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\n\nimport { MayanNumberModule } from 'ng-maya-number';\nimport { SharedModule } from 'shared';\n\nimport { BirthdayComponent } from './birthday.component';\nimport { ReadingsModule } from './hover-card/readings.module';\nimport { DateInputComponent } from './date-input/date-input';\n\n@NgModule({\n  declarations: [BirthdayComponent, DateInputComponent],\n  imports: [\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule,\n    ReadingsModule,\n\n  ],\n  exports: [\n    BirthdayComponent,\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule\n  ]\n})\nexport class BirthdayModule { }\n"],"names":["Validators","BehaviorSubject","FormGroup","FormControl","kinamNahual","distinctUntilChanged","switchMap","of","tap","debounceTime","filter","Component","DateAdapter","MomentDateAdapter","MAT_DATE_LOCALE","MAT_DATE_FORMATS","trigger","transition","style","animate","group","LocalStorageService","NgModule","CoreModule","EventEmitter","ChangeDetectionStrategy","AnimationBuilder","MatDatepickerModule","MatNativeDateModule","MayanNumberModule","SharedModule"],"mappings":"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"}
