{"version":3,"file":"ng-maya-birthday.js.map","sources":["ng://ng-maya-birthday/lib/birthday/date-format.ts","ng://ng-maya-birthday/lib/birthday/moment.ts","ng://ng-maya-birthday/lib/birthday/birthday.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.module.ts","ng://ng-maya-birthday/lib/birthday/date-input/date-input.ts","ng://ng-maya-birthday/lib/birthday/birthday.module.ts"],"sourcesContent":["export const DateFormat = {\n  parse: {\n    dateInput: 'input'\n  },\n  display: {\n    dateInput: 'DD.MM.YYYY',\n    monthYearLabel: 'MMMM YYYY',\n    dateA11yLabel: 'DD.MM.YYYY',\n    monthYearA11yLabel: 'MMMM YYYY'\n  }\n};\n","import * as moment_ from 'moment';\nexport const moment = moment_;\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport {\n  DateAdapter,\n  MAT_DATE_LOCALE,\n  MAT_DATE_FORMATS\n} from '@angular/material/core';\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\nimport { trigger, transition, style, animate, group } from '@angular/animations';\n\nimport { BehaviorSubject, of } from 'rxjs';\n\nimport { KinamNahual, kinamNahual } from 'nahual-date';\nimport { LocalStorageService } from 'core';\n\nimport { DateFormat } from './date-format';\nimport { moment } from './moment';\nimport { tap, switchMap, debounceTime, filter, distinctUntilChanged } from 'rxjs/operators';\n\nconst YEAR_MAX = 2099;\nconst YEAR_MIN = 1900;\n\nconst validators = {\n  year: [\n    Validators.required,\n    Validators.min(YEAR_MIN),\n    Validators.max(YEAR_MAX)\n  ],\n  month: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(12)\n  ],\n  day: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(31)\n  ]\n};\n\n@Component({\n  selector: 'kinam-birthday',\n  templateUrl: './birthday.component.html',\n  styleUrls: ['./birthday.component.scss'],\n  providers: [\n    {\n      provide: DateAdapter,\n      useClass: MomentDateAdapter,\n      deps: [MAT_DATE_LOCALE]\n    },\n    { provide: MAT_DATE_FORMATS, useValue: DateFormat }\n  ],\n  animations: [\n    trigger('calc', [\n      transition(':enter', [\n        style({ transform: 'translateX(15%)', opacity: 1 }),\n        animate(200)\n      ]),\n      transition(':leave', [\n        group([\n          animate('0.2s', style({ transform: 'translateX(-15%)' })),\n          animate('0.2s ease', style({\n            opacity: 0\n          }))\n        ])\n      ])\n    ])\n  ]\n})\nexport class BirthdayComponent implements OnInit {\n  public date = new Date();\n\n  public kinamDate: KinamNahual;\n  public dateCtrl: FormControl;\n  public loading$ = new BehaviorSubject(false);\n\n  constructor(\n    private localStorageService: LocalStorageService,\n  ) { }\n\n  public dateConfig: {\n    min: Date;\n    today: Date;\n    startView: 'multi-year' | 'year';\n    touchUi: boolean;\n  };\n\n  public form: FormGroup;\n\n  public maxDates = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n  public ngOnInit() {\n\n    const lastDate = localStorage.getItem('birthday');\n\n    const today = new Date();\n    if (!lastDate) {\n      this.form = new FormGroup({\n        day: new FormControl(today.getDate(), validators.day),\n        month: new FormControl(today.getMonth() + 1, validators.month),\n        year: new FormControl(today.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(today);\n    } else {\n      const timestamp = new Date(lastDate);\n      this.form = new FormGroup({\n        day: new FormControl(timestamp.getDate(), validators.day),\n        month: new FormControl(timestamp.getMonth() + 1, validators.month),\n        year: new FormControl(timestamp.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(timestamp);\n    }\n\n    this.form.valueChanges.pipe(\n      distinctUntilChanged(),\n      switchMap(x => of(x)),\n      tap(() => this.loading$.next(true)),\n      debounceTime(1000),\n      filter(\n        ({ day, month, year }) => {\n          const x = !(\n            !isNaN(day) &&\n            !isNaN(month) &&\n            !isNaN(year) &&\n            !!day &&\n            !!month &&\n            !!year &&\n            year <= YEAR_MAX &&\n            year >= YEAR_MIN\n          );\n          if (x === false) {\n            return true;\n          }\n          return false;\n        }\n      )\n    ).subscribe(({ day, month, year }) => {\n      let date = moment(new Date(`${year}/${month}/${day}`));\n      date = date.add(12, 'hours');\n      this.localStorageService.set('birthday', date.toString());\n      this.kinamDate.update(date.toDate());\n      this.loading$.next(false);\n    });\n  }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'kinam-readings',\n  template: `\n    <div class=\"hover-container\">\n      <div class=\"outer\">\n        <div class=\"inner overlay\" id=\"overlay\"></div>\n        <div class=\"inner outline\"></div>\n        <div class=\"behind fill\">\n          <div class=\"text\">\n            Get your TzolkÊ¼in Readings\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./readings.component.scss']\n})\nexport class GetReadingComponent { }\n","import { NgModule } from '@angular/core';\nimport { GetReadingComponent } from './readings.component';\nimport { CoreModule } from 'core';\n\n@NgModule({\n    declarations: [GetReadingComponent],\n    imports: [CoreModule],\n    exports: [GetReadingComponent]\n})\nexport class ReadingsModule { }\n\n","import {\n  Component,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ElementRef,\n} from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\n\nimport { moment } from '../moment';\nimport { Moment } from 'moment';\nimport { animate, style, AnimationBuilder } from '@angular/animations';\n\n@Component({\n  selector: 'kinam-date',\n  templateUrl: './date-input.html',\n  styleUrls: ['./date-input.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DateInputComponent {\n  constructor(private _builder: AnimationBuilder) { }\n  public open = false;\n  public form = new FormGroup({\n    day: new FormControl(null, Validators.required),\n    month: new FormControl(null, Validators.required),\n    year: new FormControl(null, Validators.required)\n  });\n\n  public dateChange = new EventEmitter<Moment>();\n\n  submit() {\n    if (this.form.value) {\n      const { day, month, year } = this.form.value;\n      if (day && month && year) {\n        const date = moment(new Date(`${year}/${month}/${day}`));\n        this.dateChange.emit(date);\n      }\n    }\n  }\n\n  private animFactory(direction: number, open: boolean) {\n    return this._builder.build([\n      style({\n        transform: `translateY(${open ? 0 : direction * 200}px)`,\n        opacity: open ? '1' : '0'\n      }),\n      animate(\n        '200ms cubic-bezier(0.17,0.43,0.75,0.97)',\n        style({\n          transform: `translateY(${!open ? 0 : direction * 200}px)`,\n          opacity: !open ? '1' : '0'\n        })\n      )\n    ]);\n  }\n\n  toggle(el: ElementRef, el2: ElementRef) {\n    this.open = !this.open;\n    const player = this.animFactory(!this.open ? 1 : -1, this.open).create(el);\n    const player2 = this.animFactory(this.open ? 1 : -1, !this.open).create(\n      el2\n    );\n    player.play();\n    player2.play();\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\n\nimport { MayanNumberModule } from 'ng-maya-number';\nimport { SharedModule } from 'shared';\n\nimport { BirthdayComponent } from './birthday.component';\nimport { ReadingsModule } from './hover-card/readings.module';\nimport { DateInputComponent } from './date-input/date-input';\n\n@NgModule({\n  declarations: [BirthdayComponent, DateInputComponent],\n  imports: [\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule,\n    ReadingsModule,\n\n  ],\n  exports: [\n    BirthdayComponent,\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule\n  ]\n})\nexport class BirthdayModule { }\n"],"names":[],"mappings":"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"}
