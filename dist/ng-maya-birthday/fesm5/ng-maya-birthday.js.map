{"version":3,"file":"ng-maya-birthday.js.map","sources":["ng://ng-maya-birthday/lib/birthday/date-format.ts","ng://ng-maya-birthday/lib/birthday/moment.ts","ng://ng-maya-birthday/lib/birthday/birthday.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.component.ts","ng://ng-maya-birthday/lib/birthday/hover-card/readings.module.ts","ng://ng-maya-birthday/lib/birthday/date-input/date-input.ts","ng://ng-maya-birthday/lib/birthday/birthday.module.ts"],"sourcesContent":["export const DateFormat = {\n  parse: {\n    dateInput: 'input'\n  },\n  display: {\n    dateInput: 'DD.MM.YYYY',\n    monthYearLabel: 'MMMM YYYY',\n    dateA11yLabel: 'DD.MM.YYYY',\n    monthYearA11yLabel: 'MMMM YYYY'\n  }\n};\n","import * as moment_ from 'moment';\nexport const moment = moment_;\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport {\n  DateAdapter,\n  MAT_DATE_LOCALE,\n  MAT_DATE_FORMATS\n} from '@angular/material/core';\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\nimport { trigger, transition, style, animate, group } from '@angular/animations';\n\nimport { BehaviorSubject, of } from 'rxjs';\n\nimport { KinamNahual, kinamNahual } from 'nahual-date';\nimport { LocalStorageService } from 'core';\n\nimport { DateFormat } from './date-format';\nimport { moment } from './moment';\nimport { tap, switchMap, debounceTime, filter, distinctUntilChanged } from 'rxjs/operators';\n\nconst YEAR_MAX = 2099;\nconst YEAR_MIN = 1900;\n\nconst validators = {\n  year: [\n    Validators.required,\n    Validators.min(YEAR_MIN),\n    Validators.max(YEAR_MAX)\n  ],\n  month: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(12)\n  ],\n  day: [\n    Validators.required,\n    Validators.min(1),\n    Validators.max(31)\n  ]\n};\n\n@Component({\n  selector: 'kinam-birthday',\n  templateUrl: './birthday.component.html',\n  styleUrls: ['./birthday.component.scss'],\n  providers: [\n    {\n      provide: DateAdapter,\n      useClass: MomentDateAdapter,\n      deps: [MAT_DATE_LOCALE]\n    },\n    { provide: MAT_DATE_FORMATS, useValue: DateFormat }\n  ],\n  animations: [\n    trigger('calc', [\n      transition(':enter', [\n        style({ transform: 'translateX(15%)', opacity: 1 }),\n        animate(200)\n      ]),\n      transition(':leave', [\n        group([\n          animate('0.2s', style({ transform: 'translateX(-15%)' })),\n          animate('0.2s ease', style({\n            opacity: 0\n          }))\n        ])\n      ])\n    ])\n  ]\n})\nexport class BirthdayComponent implements OnInit {\n  public date = new Date();\n\n  public kinamDate: KinamNahual;\n  public dateCtrl: FormControl;\n  public loading$ = new BehaviorSubject(false);\n\n  constructor(\n    private localStorageService: LocalStorageService,\n  ) { }\n\n  public dateConfig: {\n    min: Date;\n    today: Date;\n    startView: 'multi-year' | 'year';\n    touchUi: boolean;\n  };\n\n  public form: FormGroup;\n\n  public maxDates = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n  public ngOnInit() {\n\n    const lastDate = localStorage.getItem('birthday');\n\n    const today = new Date();\n    if (!lastDate) {\n      this.form = new FormGroup({\n        day: new FormControl(today.getDate(), validators.day),\n        month: new FormControl(today.getMonth() + 1, validators.month),\n        year: new FormControl(today.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(today);\n    } else {\n      const timestamp = new Date(lastDate);\n      this.form = new FormGroup({\n        day: new FormControl(timestamp.getDate(), validators.day),\n        month: new FormControl(timestamp.getMonth() + 1, validators.month),\n        year: new FormControl(timestamp.getFullYear(), validators.year)\n      });\n      this.kinamDate = kinamNahual(timestamp);\n    }\n\n    this.form.valueChanges.pipe(\n      distinctUntilChanged(),\n      switchMap(x => of(x)),\n      tap(() => this.loading$.next(true)),\n      debounceTime(1000),\n      filter(\n        ({ day, month, year }) => {\n          const x = !(\n            !isNaN(day) &&\n            !isNaN(month) &&\n            !isNaN(year) &&\n            !!day &&\n            !!month &&\n            !!year &&\n            year <= YEAR_MAX &&\n            year >= YEAR_MIN\n          );\n          if (x === false) {\n            return true;\n          }\n          return false;\n        }\n      )\n    ).subscribe(({ day, month, year }) => {\n      let date = moment(new Date(`${year}/${month}/${day}`));\n      date = date.add(12, 'hours');\n      this.localStorageService.set('birthday', date.toString());\n      this.kinamDate.update(date.toDate());\n      this.loading$.next(false);\n    });\n  }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'kinam-readings',\n  template: `\n    <div class=\"hover-container\">\n      <div class=\"outer\">\n        <div class=\"inner overlay\" id=\"overlay\"></div>\n        <div class=\"inner outline\"></div>\n        <div class=\"behind fill\">\n          <div class=\"text\">\n            Get your TzolkÊ¼in Readings\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./readings.component.scss']\n})\nexport class GetReadingComponent { }\n","import { NgModule } from '@angular/core';\nimport { GetReadingComponent } from './readings.component';\nimport { CoreModule } from 'core';\n\n@NgModule({\n    declarations: [GetReadingComponent],\n    imports: [CoreModule],\n    exports: [GetReadingComponent]\n})\nexport class ReadingsModule { }\n\n","import {\n  Component,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ElementRef,\n} from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\n\nimport { moment } from '../moment';\nimport { Moment } from 'moment';\nimport { animate, style, AnimationBuilder } from '@angular/animations';\n\n@Component({\n  selector: 'kinam-date',\n  templateUrl: './date-input.html',\n  styleUrls: ['./date-input.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DateInputComponent {\n  constructor(private _builder: AnimationBuilder) { }\n  public open = false;\n  public form = new FormGroup({\n    day: new FormControl(null, Validators.required),\n    month: new FormControl(null, Validators.required),\n    year: new FormControl(null, Validators.required)\n  });\n\n  public dateChange = new EventEmitter<Moment>();\n\n  submit() {\n    if (this.form.value) {\n      const { day, month, year } = this.form.value;\n      if (day && month && year) {\n        const date = moment(new Date(`${year}/${month}/${day}`));\n        this.dateChange.emit(date);\n      }\n    }\n  }\n\n  private animFactory(direction: number, open: boolean) {\n    return this._builder.build([\n      style({\n        transform: `translateY(${open ? 0 : direction * 200}px)`,\n        opacity: open ? '1' : '0'\n      }),\n      animate(\n        '200ms cubic-bezier(0.17,0.43,0.75,0.97)',\n        style({\n          transform: `translateY(${!open ? 0 : direction * 200}px)`,\n          opacity: !open ? '1' : '0'\n        })\n      )\n    ]);\n  }\n\n  toggle(el: ElementRef, el2: ElementRef) {\n    this.open = !this.open;\n    const player = this.animFactory(!this.open ? 1 : -1, this.open).create(el);\n    const player2 = this.animFactory(this.open ? 1 : -1, !this.open).create(\n      el2\n    );\n    player.play();\n    player2.play();\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { MatNativeDateModule } from '@angular/material/core';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\n\nimport { MayanNumberModule } from 'ng-maya-number';\nimport { SharedModule } from 'shared';\n\nimport { BirthdayComponent } from './birthday.component';\nimport { ReadingsModule } from './hover-card/readings.module';\nimport { DateInputComponent } from './date-input/date-input';\n\n@NgModule({\n  declarations: [BirthdayComponent, DateInputComponent],\n  imports: [\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule,\n    ReadingsModule,\n\n  ],\n  exports: [\n    BirthdayComponent,\n    MatDatepickerModule,\n    MatNativeDateModule,\n\n    MayanNumberModule,\n    SharedModule\n  ]\n})\nexport class BirthdayModule { }\n"],"names":[],"mappings":"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"}
