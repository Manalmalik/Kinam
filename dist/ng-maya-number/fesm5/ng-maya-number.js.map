{"version":3,"file":"ng-maya-number.js.map","sources":["ng://ng-maya-number/lib/maya-number/maya-number.component.ts","ng://ng-maya-number/lib/maya-number-block/maya-number.ts","ng://ng-maya-number/lib/maya-number-block/maya-number-block.component.ts","ng://ng-maya-number/lib/mayan-number.module.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  OnInit,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport {\n  state,\n  trigger,\n  style,\n  transition,\n  animate\n} from '@angular/animations';\n\n@Component({\n  selector: 'kinam-maya-number',\n  templateUrl: './maya-number.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('loading', [\n      state(\n        '0',\n        style({\n          transform: 'scale(0.75)'\n        })\n      ),\n      state(\n        '1',\n        style({\n          transform: 'scale(1)'\n        })\n      ),\n      transition('* => *', [animate('0.5s')])\n    ])\n  ]\n})\nexport class MayaNumberComponent implements OnInit {\n  @Input() number: string;\n\n  public triggerLoading: number;\n\n  public ngOnInit(): void {\n    this.triggerLoading = 1;\n  }\n}\n","enum MayanDigits {\n  Zero = '@',\n  One = '.',\n  Five = '-'\n}\n\ntype MayanDigit = '@' | '.' | '-';\n\n/**\n * Getter for sequences of simple numbers\n */\nconst fiveSequence = (nr = 1): string[] => {\n  return new Array<string>(nr).fill(MayanDigits.Five);\n};\n\nconst oneSequence = (nr = 1): string[] => {\n  return new Array<string>(nr).fill(MayanDigits.One);\n};\n\nfunction getRow(number: number) {\n  if (!number) {\n    return [[MayanDigits.Zero]];\n  }\n  return [\n    oneSequence(Math.floor(number % 5)),\n    fiveSequence(Math.floor(number / 5))\n  ];\n}\n\n/**\n * Code by https://github.com/gabber7\n */\n\nconst logBase = (n: number, base: number) => Math.log(n) / Math.log(base);\n\nfunction getMayanNumber(number: number): any[] {\n  if (number === NaN) {\n    return;\n  }\n  if (number === 0) {\n    return [[MayanDigits.Zero]];\n  }\n  const log = Math.floor(logBase(number, 20));\n  const collect = [];\n  for (let i = log; i >= 0; i--) {\n    const n = Math.pow(20, i);\n    const tmp = Math.floor(number / n);\n    number = number - tmp * n;\n    collect.push(getRow(tmp));\n  }\n  return collect.filter(x => !!x.length);\n}\n\nexport { getMayanNumber, MayanDigits, MayanDigit };\n","import {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n  OnInit\n} from '@angular/core';\nimport { MayanDigit, MayanDigits, getMayanNumber } from './maya-number';\nimport { of, Observable, defer } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { memoize } from 'decko';\n\n@Component({\n  selector: 'kinam-maya-number-block',\n  templateUrl: './maya-number-block.component.html',\n  styleUrls: ['./maya-number-block.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MayaNumberBlockComponent implements OnInit {\n  @Input() number: number;\n\n  public number$: Observable<any>;\n\n  public ngOnInit() {}\n\n  @memoize\n  public getVal$(number): Observable<any> {\n    return defer(() => of(number)).pipe(\n      map(res => getMayanNumber(res)),\n      map(res => res.map(x => x.filter(y => y.length))),\n      map(block => {\n        return {\n          numeric: block.map(x =>\n            x.map(y => this.getValFromRow(y)).reduce((acc, val) => acc + val, 0)\n          ),\n          block,\n          inner: block.map(x => ({\n            mayan: x,\n            numeric: x.map(this.getValFromRow)\n          }))\n        };\n      })\n    );\n  }\n\n  public getValFromRow(row: MayanDigit[]) {\n    return row.reduce((acc, value) => {\n      switch (value) {\n        case MayanDigits.Five: {\n          return acc + 5;\n        }\n        case MayanDigits.One: {\n          return acc + 1;\n        }\n        default:\n          return acc;\n      }\n    }, 0);\n  }\n\n  public isSimpleNumber(val: any) {\n    if (!val.length) {\n      return true;\n    }\n    return typeof val === 'string';\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { CoreModule } from 'core';\nimport { SharedModule } from 'shared';\n\nimport { MayaNumberComponent } from './maya-number/maya-number.component';\nimport { MayaNumberBlockComponent } from './maya-number-block/maya-number-block.component';\n\n@NgModule({\n  imports: [CoreModule, SharedModule],\n  declarations: [MayaNumberComponent, MayaNumberBlockComponent],\n  exports: [MayaNumberComponent, MayaNumberBlockComponent]\n})\nexport class MayanNumberModule {}\n"],"names":["tslib_1.__decorate"],"mappings":";;;;;;;;;;;;;AAAA;IAcA;KA8BC;;;;IAHQ,sCAAQ;;;IAAf;QACE,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;KACzB;;gBA7BF,SAAS,SAAC;oBACT,QAAQ,EAAE,mBAAmB;oBAC7B,oRAA2C;oBAC3C,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAC/C,UAAU,EAAE;wBACV,OAAO,CAAC,SAAS,EAAE;4BACjB,KAAK,CACH,GAAG,EACH,KAAK,CAAC;gCACJ,SAAS,EAAE,aAAa;6BACzB,CAAC,CACH;4BACD,KAAK,CACH,GAAG,EACH,KAAK,CAAC;gCACJ,SAAS,EAAE,UAAU;6BACtB,CAAC,CACH;4BACD,UAAU,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;yBACxC,CAAC;qBACH;iBACF;;;yBAEE,KAAK;;IAOR,0BAAC;CA9BD;;;;;;;;ICbE,MAAO,GAAG;IACV,KAAM,GAAG;IACT,MAAO,GAAG;;;;;;IAQN,YAAY,GAAG,UAAC,EAAM;IAAN,mBAAA,EAAA,MAAM;IAC1B,OAAO,IAAI,KAAK,CAAS,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;CACrD;;IAEK,WAAW,GAAG,UAAC,EAAM;IAAN,mBAAA,EAAA,MAAM;IACzB,OAAO,IAAI,KAAK,CAAS,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;CACpD;;;;;AAED,SAAS,MAAM,CAAC,MAAc;IAC5B,IAAI,CAAC,MAAM,EAAE;QACX,OAAO,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;KAC7B;IACD,OAAO;QACL,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACnC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KACrC,CAAC;CACH;;;;;IAMK,OAAO,GAAG,UAAC,CAAS,EAAE,IAAY,IAAK,OAAA,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAA;;;;;AAEzE,SAAS,cAAc,CAAC,MAAc;IACpC,IAAI,MAAM,KAAK,GAAG,EAAE;QAClB,OAAO;KACR;IACD,IAAI,MAAM,KAAK,CAAC,EAAE;QAChB,OAAO,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;KAC7B;;QACK,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;;QACrC,OAAO,GAAG,EAAE;IAClB,KAAK,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;;YACvB,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;;YACnB,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QAClC,MAAM,GAAG,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC;QAC1B,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;KAC3B;IACD,OAAO,OAAO,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,CAAC,CAAC,MAAM,GAAA,CAAC,CAAC;CACxC;;;;;;;ICxCD;KAsDC;;;;IA3CQ,2CAAQ;;;IAAf,eAAoB;;;;;IAGb,0CAAO;;;;IAAd,UAAe,MAAM;QADrB,iBAkBC;QAhBC,OAAO,KAAK,CAAC,cAAM,OAAA,EAAE,CAAC,MAAM,CAAC,GAAA,CAAC,CAAC,IAAI,CACjC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,cAAc,CAAC,GAAG,CAAC,GAAA,CAAC,EAC/B,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,GAAA,CAAC,GAAA,CAAC,GAAA,CAAC,EACjD,GAAG,CAAC,UAAA,KAAK;YACP,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,UAAA,CAAC;oBAClB,OAAA,CAAC,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAA,CAAC,CAAC,MAAM,CAAC,UAAC,GAAG,EAAE,GAAG,IAAK,OAAA,GAAG,GAAG,GAAG,GAAA,EAAE,CAAC,CAAC;iBAAA,CACrE;gBACD,KAAK,OAAA;gBACL,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,QAAC;oBACrB,KAAK,EAAE,CAAC;oBACR,OAAO,EAAE,CAAC,CAAC,GAAG,CAAC,KAAI,CAAC,aAAa,CAAC;iBACnC,IAAC,CAAC;aACJ,CAAC;SACH,CAAC,CACH,CAAC;KACH;;;;;IAEM,gDAAa;;;;IAApB,UAAqB,GAAiB;QACpC,OAAO,GAAG,CAAC,MAAM,CAAC,UAAC,GAAG,EAAE,KAAK;YAC3B,QAAQ,KAAK;gBACX,KAAK,WAAW,CAAC,IAAI,EAAE;oBACrB,OAAO,GAAG,GAAG,CAAC,CAAC;iBAChB;gBACD,KAAK,WAAW,CAAC,GAAG,EAAE;oBACpB,OAAO,GAAG,GAAG,CAAC,CAAC;iBAChB;gBACD;oBACE,OAAO,GAAG,CAAC;aACd;SACF,EAAE,CAAC,CAAC,CAAC;KACP;;;;;IAEM,iDAAc;;;;IAArB,UAAsB,GAAQ;QAC5B,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE;YACf,OAAO,IAAI,CAAC;SACb;QACD,OAAO,OAAO,GAAG,KAAK,QAAQ,CAAC;KAChC;;gBArDF,SAAS,SAAC;oBACT,QAAQ,EAAE,yBAAyB;oBACnC,osBAAiD;oBAEjD,eAAe,EAAE,uBAAuB,CAAC,MAAM;;iBAChD;;;yBAEE,KAAK;;IAONA;QADC,OAAO;;;wCACgB,UAAU;2DAiBjC;IAuBH,+BAAC;CAtDD;;;;;;ACXA;IAQA;KAKiC;;gBALhC,QAAQ,SAAC;oBACR,OAAO,EAAE,CAAC,UAAU,EAAE,YAAY,CAAC;oBACnC,YAAY,EAAE,CAAC,mBAAmB,EAAE,wBAAwB,CAAC;oBAC7D,OAAO,EAAE,CAAC,mBAAmB,EAAE,wBAAwB,CAAC;iBACzD;;IAC+B,wBAAC;CALjC;;;;;;;;;;;;;;"}
